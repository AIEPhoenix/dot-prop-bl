(function(a,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(a=typeof globalThis<"u"?globalThis:a||self,s(a["dot-prop-bl"]={}))})(this,function(a){"use strict";const s=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},g=e=>s(e)&&Object.keys(e).length===0,u=new Set(["__proto__","prototype","constructor"]),x=new Set("0123456789");function d(e){const t=[];let n="",r="start",i=!1;for(const f of e)switch(f){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=f),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=f;break}if(u.has(n))return[];t.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=f;break}if(r==="property"){if(u.has(n))return[];t.push(n),n=""}r="index";break}case"]":{if(r==="index"){t.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!x.has(f))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=f}}switch(i&&(n+="\\"),r){case"property":{if(u.has(n))return[];t.push(n);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function l(e,t){if(typeof t!="number"&&Array.isArray(e)){const n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function p(e,t){if(l(e,t))throw new Error("Cannot use string index")}function w(e,t,n){if(!s(e)||typeof t!="string")return n===void 0?e:n;const r=d(t);if(r.length===0)return n;for(let i=0;i<r.length;i++){const f=r[i];if(l(e,f)?e=i===r.length-1?void 0:null:e=e[f],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function E(e,t,n){if(!s(e)||typeof t!="string")return e;const r=e,i=d(t);for(let f=0;f<i.length;f++){const o=i[f];p(e,o),f===i.length-1?e[o]=n:s(e[o])||(e[o]=typeof i[f+1]=="number"?[]:{}),e=e[o]}return r}function k(e,t){if(!s(e)||typeof t!="string")return!1;const n=d(t);for(let r=0;r<n.length;r++){const i=n[r];if(p(e,i),r===n.length-1)return delete e[i],!0;if(e=e[i],!s(e))return!1}}function m(e,t){if(!s(e)||typeof t!="string")return!1;const n=d(t);if(n.length===0)return!1;for(const r of n){if(!s(e)||!(r in e)||l(e,r))return!1;e=e[r]}return!0}function y(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[\\.[]/g,"\\$&")}function h(e){const t=Object.entries(e);return Array.isArray(e)?t.map(([n,r])=>[Number(n),r]):t}function I(e){let t="";for(let[n,r]of h(e))typeof r=="number"?t+=`[${r}]`:(r=y(r),t+=n===0?r:`.${r}`);return t}function*c(e,t=[]){if(!s(e)||g(e)){t.length>0&&(yield I(t));return}for(const[n,r]of h(e))yield*c(r,[...t,n])}function P(e){return[...c(e)]}a.deepKeys=P,a.deleteProperty=k,a.escapePath=y,a.getProperty=w,a.hasProperty=m,a.setProperty=E,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
